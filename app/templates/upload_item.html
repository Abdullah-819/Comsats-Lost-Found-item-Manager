{% extends "layout.html" %}

{% block content %}
<div class="dashboard-page">
    <div class="frosty main-card">
        <h1 class="main-card-title">Upload Lost Item</h1>

        <form class="upload-form frosty-form" 
              method="POST" 
              action="{{ url_for('dashboard.upload_item') }}"
              enctype="multipart/form-data">

            <label>Name:</label>
            <input type="text" name="name" placeholder="Item Name" required>

            <label>Description:</label>
            <textarea name="description" placeholder="Describe the item..."></textarea>

            <label>Location:</label>
            <input type="text" name="location" placeholder="Where it was lost">

            <label>Contact:</label>
            <input type="text" name="contact" placeholder="Your contact info">

            <!-- Frosty File Upload Button -->
            <label for="file-ipload-btn" class="file-upload-label frosty-upload">
                Select Image
            </label>
            <input type="file" id="file-ipload-btn" name="image_file" accept="image/*" onchange="previewImage(event)">

            <!-- Preview Box -->
            <img id="preview-img" class="preview-image" src="#" alt="Preview">

            <button type="submit" class="upload-submit-btn">Upload Item</button>
        </form>
    </div>
</div>

<script>
function previewImage(event) {
    const preview = document.getElementById('preview-img');
    const file = event.target.files[0];

    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = "block";
        };
        reader.readAsDataURL(file);
    } else {
        preview.src = "#";
        preview.style.display = "none";
    }
}
</script>

{% endblock %}
